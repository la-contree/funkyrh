<!doctype html>
<link rel=stylesheet href=vendor/font-awesome-4.7.0/css/font-awesome.min.css>
<link rel=stylesheet href=vendor/grillade.css>
<link rel=stylesheet href=style.css>
<meta charset=utf-8>
<title>La contrée : Viens te ressourcer en affûtant tes outils avec nous.</title>

<section id=trainers>
    <h2>Les Humains</h2>
</section>

<template id=bios>
    <div class="grid-3 has-gutter">
        <article>
            <h3><span class=baseline></span></h3>
            <img src="">
            <p></p>
            <span class=links>
                <a href=""><i class="fa fa-sitemap"></i></a>
                <a href=""><i class="fa fa-twitter"></i></a>
                <a href=""><i class="fa fa-envelope-open"></i></a>
            </span>
        </article>
    </div>
</template>

<script>
    const bios = document.querySelector('#trainers')
    const templateBio = document.querySelector('template#bios').content
    const name = templateBio.querySelector('h3')
    const baseline = templateBio.querySelector('h3 .baseline')
    const image = templateBio.querySelector('img')
    const description = templateBio.querySelector('p')
    const links = templateBio.querySelector('.links')

    fetch('http://api.daktary.com/la-contree/la-contree.com/blob/bio-markdown/membres/raphael-pierquin.md')
        .then(response => response.json())
        .then(bio => {
            image.src = bio.meta.image
            baseline.innerText = bio.meta.accroche
            description.innerHTML = bio.body
            links.querySelector('.fa-twitter').parentNode.href = bio.meta.twitter

            bios.appendChild(document.importNode(templateBio, true))
        })
</script>










<script>
    // Create an array with 0 to n values and pseudo-shuffle
    const serie = Array.apply(null, {length: 22})
        .map(Number.call, Number)
        .sort(() => 0.5 - Math.random())
    const portraits = document.querySelectorAll('section#trainers img')

    Array.from(portraits).map(img => {
        img.src = `img/humains/${serie.pop()+1}.jpg`
    })
</script>
